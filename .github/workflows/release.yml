name: Release

on:
  push:
    tags:
      - 'v*.*.*'
  workflow_dispatch:

jobs:
  create-release:
    name: Create Release
    runs-on: ubuntu-latest
    permissions:
      contents: write
    
    steps:
      - name: Checkout code
        uses: actions/checkout@v4
      
      - name: Get version from tag
        id: version
        run: |
          VERSION="${GITHUB_REF#refs/tags/v}"
          echo "version=$VERSION" >> $GITHUB_OUTPUT
          echo "ğŸ“¦ Version: $VERSION"
      
      - name: Create release notes
        run: |
          cat > release-notes.md << 'EOF'
          ## ğŸ‰ Theme After Format
          
          Terminal Ã¶zelleÅŸtirme suite'inin yeni sÃ¼rÃ¼mÃ¼!
          
          ### ğŸ“¥ Kurulum
          
          ```bash
          wget https://raw.githubusercontent.com/alibedirhan/Theme-after-format/main/install.sh
          chmod +x install.sh
          ./install.sh
          ```
          
          ### ğŸ“š DokÃ¼mantasyon
          
          - [README](https://github.com/alibedirhan/Theme-after-format#readme)
          - [CHANGELOG](https://github.com/alibedirhan/Theme-after-format/blob/main/CHANGELOG.md)
          
          **Made with â¤ï¸ by Ali Bedirhan**
          EOF
          
          echo "Release notes oluÅŸturuldu âœ…"
      
      - name: Create release files
        run: |
          mkdir -p release-files
          
          # Script dosyalarÄ±nÄ± kopyala
          cp *.sh release-files/ 2>/dev/null || echo "BazÄ± .sh dosyalarÄ± bulunamadÄ±"
          
          # DokÃ¼mantasyon
          cp README.md release-files/ 2>/dev/null || echo "README yok"
          cp LICENSE release-files/ 2>/dev/null || echo "LICENSE yok"
          
          # ArÅŸiv oluÅŸtur
          cd release-files
          tar -czf ../theme-after-format-v${{ steps.version.outputs.version }}.tar.gz * || echo "tar baÅŸarÄ±sÄ±z"
          zip -r ../theme-after-format-v${{ steps.version.outputs.version }}.zip * || echo "zip baÅŸarÄ±sÄ±z"
          cd ..
          
          echo "ArÅŸivler oluÅŸturuldu âœ…"
      
      - name: Create GitHub Release
        uses: softprops/action-gh-release@v1
        with:
          tag_name: v${{ steps.version.outputs.version }}
          name: Release v${{ steps.version.outputs.version }}
          body_path: release-notes.md
          draft: false
          prerelease: false
          files: |
            theme-after-format-v${{ steps.version.outputs.version }}.tar.gz
            theme-after-format-v${{ steps.version.outputs.version }}.zip
            install.sh
        env:
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
      
      - name: Success
        run: |
          echo "ğŸ‰ Release baÅŸarÄ±yla oluÅŸturuldu!"
          echo "ğŸ“¦ Version: v${{ steps.version.outputs.version }}"